<div class="form-group {% if error %}has-error{% endif %}" style="display: flex; align-items: center; gap: 10px;">
    <input
        id="{{ field.id }}"
        name="{{ field.id }}"
        type="password"
        class="{{ field.class_ }} {% if error %}{{ field.error_class }}{% endif %}"
        value="{{ '' if data is none else data }}"
        {{ field.input_params() | safe }}
    />
    <button
        type="button"
        class="btn btn-outline-secondary"
        onclick="togglePasswordVisibility('{{ field.id }}')"
        style="white-space: nowrap;"
    >
        <i class="fa fa-eye"></i>
    </button>
    {% if field.help_text %}
        <small class="form-hint">{{ field.help_text }}</small>
    {% endif %}
</div>

<script>
function togglePasswordVisibility(fieldId) {
    const input = document.getElementById(fieldId);
    const button = input.nextElementSibling;
    const icon = button.querySelector('i');

    if (input.type === "password") {
        input.type = "text";
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
    } else {
        input.type = "password";
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
    }
}
</script>